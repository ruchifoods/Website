2025-06-16 10:11:08 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Restaurant Owner logged in successfully: owner@gmail.com
2025-06-16 10:11:11 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:11:16 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:11:18 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:11:20 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:12:15 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 17
2025-06-16 10:12:15 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:12:17 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:24 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:16:27 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:31 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:16:33 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:36 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:16:37 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:40 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:16:41 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:43 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:16:44 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:16:46 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:31:33 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 1 menu categories
2025-06-16 10:32:09 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 1 menu categories
2025-06-16 10:32:22 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 1 menu categories
2025-06-16 10:33:08 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Restaurant Owner logged in successfully: owner@gmail.com
2025-06-16 10:33:11 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:33:17 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:33:50 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 23
2025-06-16 10:33:50 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:33:52 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:34:24 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 24
2025-06-16 10:34:24 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:34:29 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:34:46 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 25
2025-06-16 10:34:46 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:34:51 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:34:57 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 10:35:22 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 10:35:41 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 10:35:59 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:04:35 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:04:56 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Restaurant Owner logged in successfully: owner@gmail.com
2025-06-16 14:04:58 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 14:05:04 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 14:05:14 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:08:52 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:09:18 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Restaurant Owner logged in successfully: owner@gmail.com
2025-06-16 14:09:20 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 14:09:21 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 14:09:24 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 17
2025-06-16 14:09:24 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 14:09:27 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 5 menu categories
2025-06-16 14:09:39 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 14:09:50 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Schedule updated successfully: June 17
2025-06-16 14:09:50 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 5 category.
2025-06-16 14:09:53 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:11:02 [INF] [FoodDeliveryApp.Services.RestaurantOwnerService] Retrieved 9 menus.
2025-06-16 14:35:05 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 14:35:11 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 7 menu items for category 3
2025-06-16 14:35:11 [INF] [FoodDeliveryApp.Services.CommonService] Retrieved 12 quantities
2025-06-16 14:35:15 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved menu items by id 3
2025-06-16 14:35:15 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved pickup times.
2025-06-16 16:34:40 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 16:34:41 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu items for category 6
2025-06-16 16:34:41 [INF] [FoodDeliveryApp.Services.CommonService] Retrieved 12 quantities
2025-06-16 16:34:45 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved menu items by id 3
2025-06-16 16:34:45 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved pickup times.
2025-06-16 16:37:10 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 16:48:35 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu items for category 6
2025-06-16 16:48:35 [INF] [FoodDeliveryApp.Services.CommonService] Retrieved 12 quantities
2025-06-16 16:48:39 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved menu items by id 3
2025-06-16 16:48:39 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved pickup times.
2025-06-16 16:48:45 [ERR] [Microsoft.EntityFrameworkCore.Update] An exception occurred in the database while saving changes for context type 'FoodDeliveryApp.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'EmailAddress', table 'FoodDeliveryAppDB.dbo.Orders'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:2e920887-035a-410e-a755-f765cb132ef3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'EmailAddress', table 'FoodDeliveryAppDB.dbo.Orders'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:2e920887-035a-410e-a755-f765cb132ef3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at FoodDeliveryApp.Services.CustomerService.CreateOrder(List`1 orderItems, Int32 userId, String pickupTime, Int32 categoryId, String firstName, String lastName, String phoneNumber, String emailAddesss) in C:\Users\GDIT\source\repos\FoodDeliveryApp_22_May_2025\FoodDeliveryApp\Services\CustomerService.cs:line 473
2025-06-16 16:48:45 [ERR] [FoodDeliveryApp.Services.CustomerService] Error adding order or order item(s) for user -1
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot insert the value NULL into column 'EmailAddress', table 'FoodDeliveryAppDB.dbo.Orders'; column does not allow nulls. INSERT fails.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.Read()
   at Microsoft.EntityFrameworkCore.Storage.RelationalDataReader.Read()
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
ClientConnectionId:2e920887-035a-410e-a755-f765cb132ef3
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSet(Int32 startCommandIndex, RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.Consume(RelationalDataReader reader)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.Execute(IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.Execute(IEnumerable`1 commandBatches, IRelationalConnection connection)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChanges(IList`1 entries)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(IList`1 entriesToSave)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(StateManager stateManager, Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.<>c.<SaveChanges>b__112_0(DbContext _, ValueTuple`2 t)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.Execute[TState,TResult](TState state, Func`3 operation, Func`3 verifySucceeded)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges(Boolean acceptAllChangesOnSuccess)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChanges()
   at FoodDeliveryApp.Services.CustomerService.CreateOrder(List`1 orderItems, Int32 userId, String pickupTime, Int32 categoryId, String firstName, String lastName, String phoneNumber, String emailAddesss) in C:\Users\GDIT\source\repos\FoodDeliveryApp_22_May_2025\FoodDeliveryApp\Services\CustomerService.cs:line 473
2025-06-16 16:48:45 [INF] [FoodDeliveryApp.Controllers.CustomerAccountController] Order creation failed. Please try again.
2025-06-16 16:48:45 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 16:48:54 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved pickup times.
2025-06-16 16:55:30 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
2025-06-16 16:55:33 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu items for category 6
2025-06-16 16:55:33 [INF] [FoodDeliveryApp.Services.CommonService] Retrieved 12 quantities
2025-06-16 16:55:37 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved menu items by id 3
2025-06-16 16:55:37 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved pickup times.
2025-06-16 16:56:03 [INF] [FoodDeliveryApp.Services.CustomerService] Created order successfully for user -1
2025-06-16 16:56:03 [INF] [FoodDeliveryApp.Services.CustomerService] Added order item(s) successfully for user -1
2025-06-16 16:56:03 [INF] [FoodDeliveryApp.Controllers.CustomerAccountController] Order created successfully.
2025-06-16 16:56:03 [INF] [FoodDeliveryApp.Services.CustomerService] Retrieved 4 menu categories
